# Test of Chinese as a Foreign Language Listening Band C (Vol.1)
# Message: Terribly sorry for the delayed questions, some questions are equipped with 2 audios, so it's safe to say the delay is for the second audio to finish then you can answer...

import sys
import time
import subprocess
import threading

from pathlib import Path
from termcolor import colored
from PIL import Image
from mutagen.mp3 import MP3

# Question Bank 

def get_audio_duration(audio_files, audio_dir):
    total = 0.0
    for file in audio_files:
        path = audio_dir / file
        audio = MP3(path)
        total += audio.info.length
    return int(total) + 1  # buffer for safety



questions = [
    {
    "id": 1,
    "audio": ['1-01-0.mp3', '1-01-1.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "ç›¡å¿«æ¬å®¶",
        "B": "ä¸ä»˜æˆ¿ç§Ÿ",
        "C": "ç¹¼çºŒä½ä¸‹å»",
        "D": "æ‰¾äººä¸€èµ·ç§Ÿ",
    },
    "answer": "C"
},

{
    "id": 2,
    "audio": ['1-02.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "ä»–ä¸è¦æŠ¼é‡‘äº†",
        "B": "ä»–æ±ºå®šå†ä½ä¸€å¤©å°±æ¬å®¶",
        "C": "ä»–è¦æŠ¼é‡‘ï¼Œä½†ä¸æ‰“ç®—æ¬å®¶",
        "D": "ä»–æ‹¿åˆ°æŠ¼é‡‘ä»¥å¾Œæ‰è¦æ¬å®¶",
    },
    "answer": "D"
},

{
    "id": 3,
    "audio": ['1-03-0.mp3', '1-03-1.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "èƒ½å…‹æœå¤©ç”Ÿçš„éšœç¤™",
        "B": "å°ˆé–€ç‚ºæ®˜éšœå…’ç«¥ä½œæ›²",
        "C": "æ–‡ç« å¯«å¾—æ¯”ä½œå®¶é‚„å¥½",
        "D": "å°‡çˆ¶è¦ªçš„ä½œå“å¯«æˆæ›²å­",
    },
    "answer": "A"
},

{
    "id": 4,
    "audio": ['1-04.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "æœƒè®“äººæƒ³ç¡è¦º",
        "B": "èƒ½å¹«åŠ©äººå€‘å‰µä½œéŸ³æ¨‚",
        "C": "æœƒè®“äººå€‘å¿˜äº†è¦ç¡è¦º",
        "D": "æœƒä»‹ç´¹ä»–å…’å­çš„éŸ³æ¨‚",
    },
    "answer": "A"
},

{
    "id": 5,
    "audio": ['1-05-0.mp3', '1-05-1.mp3'],
    "image": None,
    "question": "é€™é …æœå‹™æœ‰ä»€éº¼å„ªé»ï¼Ÿ",
    "choices": {
        "A": "å¯é™ä½é†«ç™‚è²»ç”¨",
        "B": "å¯ç¶­è­·ç—…äººéš±ç§",
        "C": "å¯æŒ‡å®šé†«ç”Ÿçœ‹è¨º",
        "D": "çœ‹ç—…å¯äº‹å…ˆé ç´„",
    },
    "answer": "B"
},

{
    "id": 6,
    "audio": ['1-06.mp3'],
    "image": None,
    "question": "é€™é …æœå‹™ æ”¹å–„äº†å“ªç¨®ç¾è±¡ ï¼Ÿ",
    "choices": {
        "A": "ç—…äººæ›ä¸åˆ°è™Ÿçš„å›°å¢ƒ",
        "B": "å€™è¨ºé–“éåº¦æ“æ“ çš„ ç‹€æ³",
        "C": "ç—…äººéå°‹ä¸è‘—è¨ºé–“çš„æƒ…æ³",
        "D": "èˆ’ç·©äº† ç—…äººå€™è¨ºæ™‚çš„ç„¦æ…®",
    },
    "answer": "B"
},

{
    "id": 7,
    "audio": ['1-07.mp3'],
    "image": None,
    "question": "é—œæ–¼é€™é …æœå‹™ï¼Œå“ªä¸€å€‹æ˜¯å°çš„ï¼Ÿ ç¾åœ¨è«‹è½å°è©±ã€‚",
    "choices": {
        "A": "æ‰€æœ‰é–€è¨ºéƒ½æœƒæä¾›",
        "B": "ä½¿ç”¨å°è±¡ä»¥è€äººç‚ºä¸»",
        "C": "å™¨æç”¨å®Œå³ä¸Ÿï¼Œä¸æ€•å‚³æŸ“",
        "D": "è€ƒæ…®åˆ°è¦–éšœã€è½éšœäººå£«çš„éœ€æ±‚",
    },
    "answer": "D"
},

{
    "id": 8,
    "audio": ['1-08-0.mp3', '1-08-1.mp3'],
    "image": None,
    "question": "é—œæ–¼å¯¦æ–½ é€™é …æ”¿ç­–ï¼Œ ä¸‹é¢å“ªä¸€å€‹æ˜¯å°çš„ï¼Ÿ",
    "choices": {
        "A": "é£Ÿå“é¡ç­‰ç”¢å“è¼ƒä¸å—æ­¡è¿",
        "B": "å¤§å¤šæ•¸ç›£ç„ ç”Ÿç”¢æ‰‹å·¥è—å“",
        "C": "åŒæ™‚è€ƒé‡äº† é•·æœŸæœåˆ‘çš„ äºº",
        "D": "æœ‰é¤é£²èƒŒæ™¯çš„å—åˆ‘äººæ‰èƒ½åƒåŠ ",
    },
    "answer": "C"
},

{
    "id": 9,
    "audio": ['1-09.mp3'],
    "image": None,
    "question": "é€™ä½å°å§ç”¨çµ±è¨ˆè³‡æ–™ä¾†èªªæ˜å“ªä¸€å€‹ç¾è±¡ï¼Ÿ",
    "choices": {
        "A": "å…¥ç„çš„äººæ•¸è·Ÿéå»å·®ä¸å¤š",
        "B": "æœ‰å°ˆé•·çš„äººå…¥ç„çš„æ¯”ä¾‹è¼ƒä½",
        "C": "ç›£ç„ç”Ÿç”¢çš„å•†å“é —å—å¤§çœ¾å–œ æ„›",
        "D": "å‡ºç„å¾Œçš„å†çŠ¯ç‡å’Œéå»å·®ä¸å¤š",
    },
    "answer": "D"
},

{
    "id": 10,
    "audio": ['1-10.mp3'],
    "image": None,
    "question": "æ ¹æ“šå°è©±ï¼Œä½¿å‡ºç„çš„äººå†åº¦çŠ¯ç½ªçš„ä¸»è¦å› ç´ æ˜¯ä»€éº¼ï¼Ÿ ç¾åœ¨è«‹è½å°è©±ã€‚",
    "choices": {
        "A": "ç¶“æ¿Ÿä¸æ™¯æ°£",
        "B": "ç¤¾æœƒæ¥å—åº¦ä¸é«˜",
        "C": "ç¼ºä¹è¬€ç”Ÿçš„æŠ€èƒ½",
        "D": "æ‹¿ä¸åˆ°ç¤¾æœƒè£œåŠ©",
    },
    "answer": "B"
},

{
    "id": 11,
    "audio": ['1-11-0.mp3', '1-11-1.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å› ç‚ºæ­é–‹äº†æ²‰é¦™æˆå½¢çš„ç¥•å¯†",
        "B": "å› ç‚ºæ‰¾åˆ°äº†æ²‰é¦™ä¸å—èŸ²å®³çš„æ–¹æ³•",
        "C": "å› ç‚ºç™¼ç¾äº†æé«˜æ²‰é¦™ç”¢é‡çš„æ–¹æ³•",
        "D": "å› ç‚ºæ‰“ç ´äº†ä¸èƒ½äººå·¥ç¨®æ¤æ²‰é¦™çš„æƒ³æ³•",
    },
    "answer": "C"
},

{
    "id": 12,
    "audio": ['1-12.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "ä»–æ‡·ç–‘ç ”ç©¶çµæœ",
        "B": "ä»–è®šè³ç ”ç©¶ç™¼ç¾",
        "C": "ä»–è‚¯å®šç ”ç©¶çš„æ–¹æ³•",
        "D": "ä»–è³ªç–‘ç ”ç©¶çš„å‹•æ©Ÿ",
    },
    "answer": "B"
},

{
    "id": 13,
    "audio": ['1-13.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "ç ”ç©¶æ™‚é–“ä¸åªä¸€å¹´",
        "B": "éœ€è¦é€²è¡Œç›¸é—œå¯¦é©—",
        "C": "å¾ŒçºŒéœ€è¦å¼µä¸»ä»»çš„å¹«å¿™",
        "D": "å¥¹æœƒé•·æœŸé—œæ³¨ä¹‹å¾Œçš„ç™¼å±•",
    },
    "answer": "A"
},

{
    "id": 14,
    "audio": ['1-14-0.mp3', '1-14-1.mp3'],
    "image": None,
    "question": "å°è©±ä¸­æåˆ°ï¼Œé€™å®¶ç¶²è·¯æ›¸åº—æ—©æœŸæ‰€ä½¿ç”¨çš„ç­–ç•¥æ˜¯ä»€éº¼ï¼Ÿ",
    "choices": {
        "A": "åªè³¼è²·ä¸€æœ¬æ›¸å°±å…é‹è²»",
        "B": "å°‡é‹è²»åŒ…å«åœ¨æ›¸ç± çš„å”®åƒ¹ä¸­",
        "C": "é‹è²»éš¨è‘—æ¶ˆè²»é‡‘é¡æé«˜è€Œå¢åŠ ",
        "D": "æ¶ˆè²»ä¸€å®šçš„é‡‘é¡ï¼Œäº«æœ‰ä½å»‰é‹è²»",
    },
    "answer": "D"
},

{
    "id": 15,
    "audio": ['1-15.mp3'],
    "image": None,
    "question": "é€™å®¶ç¶²è·¯æ›¸åº—å¦‚ä½•æ”¹è®Šç­–ç•¥ï¼Ÿ",
    "choices": {
        "A": "ç„¡æ¢ä»¶æä¾›å…é‹è²»æœå‹™",
        "B": "åŠ å…¥æœƒå“¡å°±èƒ½äº«æœ‰å…é‹è²» æœå‹™",
        "C": "æé«˜äº«æœ‰å…é‹è²» æœå‹™çš„è³¼ç‰©é‡‘é¡",
        "D": "è³¼è²·æŒ‡å®šæ›¸ç±å¯äº«æœ‰å…é‹è²» æœå‹™",
    },
    "answer": "C"
},

{
    "id": 16,
    "audio": ['1-16.mp3'],
    "image": None,
    "question": "é€™ä½å…ˆç”Ÿæåˆ°çš„æ±½æ°´å’Œé›¶é£Ÿæœ‰ä»€éº¼ç‰¹è‰²ï¼Ÿ",
    "choices": {
        "A": "éƒ½é€è´ˆå“",
        "B": "éƒ½æ˜¯å…è²»çš„",
        "C": "é™ä½å» å•† ç”Ÿç”¢æˆæœ¬",
        "D": "è®“æ¶ˆè²»è€…ä»¥ç‚ºæ²’æœ‰è² æ“”",
    },
    "answer": "D"
},

{
    "id": 17,
    "audio": ['1-17.mp3'],
    "image": None,
    "question": "é€™ä½å…ˆç”Ÿèªç‚ºå…è²»çš„è´ˆå“æˆ–æœå‹™æ€éº¼æ¨£ï¼Ÿ ç¾åœ¨è«‹è½å°è©±ã€‚",
    "choices": {
        "A": "ä¸è¦‹å¾—åˆ’ç®—",
        "B": "èƒ½é€ ç¦æ¶ˆè²»è€…",
        "C": "å“è³ªä¸€å®šä¸å¥½",
        "D": "æ¶ˆè²»è€…ä¸ä¸€å®šå–œæ­¡",
    },
    "answer": "A"
},

{
    "id": 18,
    "audio": ['1-18-0.mp3', '1-18-1.mp3'],
    "image": None,
    "question": "é€™å€‹ç¶²ç«™èƒ½è®“äººåšä»€éº¼ï¼Ÿ",
    "choices": {
        "A": "é–‹å€‹ç©ç¬‘è¼•é¬†ä¸€ä¸‹",
        "B": "æŠ•ç¥¨é¸å‡ºæœ€å‡ºåçš„äºº",
        "C": "èªè­˜å¾ˆå¤šæœ‰æˆå°±çš„äºº",
        "D": "æŠŠè‡ªå·±ä»‹ç´¹çµ¦ç¶²è·¯ä¸Šçš„æœ‹å‹",
    },
    "answer": "A"
},

{
    "id": 19,
    "audio": ['1-19.mp3'],
    "image": None,
    "question": "é—œæ–¼é€™å€‹ç¶²ç«™æ‰€æä¾›çš„æª”æ¡ˆï¼Œå“ªä¸€å€‹æ˜¯å°çš„ï¼Ÿ",
    "choices": {
        "A": "å…·æœ‰æ³•å¾‹æ•ˆåŠ›",
        "B": "å¯ä»¥å…è²»æ”¹è®Šé¢¨æ ¼",
        "C": "ä¸€å¹´å…§å¯ä»¥éš¨æ™‚ç”³è«‹",
        "D": "åªæœ‰å…¬ç›Šåœ˜é«”å¯ä»¥ç”³è«‹",
    },
    "answer": "C"
},

{
    "id": 20,
    "audio": ['1-20.mp3'],
    "image": None,
    "question": "é€™å€‹ç¶²ç«™æ€éº¼åˆ©ç”¨è³ºåˆ°çš„éŒ¢ï¼Ÿ",
    "choices": {
        "A": "å¹³å‡åˆ†çµ¦å„å€‹å…¬ç›Šåœ˜é«”",
        "B": "çµ¦æœ€å—æ­¡è¿çš„å…¬ç›Šåœ˜é«”",
        "C": "æˆç«‹åœ‹éš›æ€§çš„å…¬ç›Šåœ˜é«”",
        "D": "è«‹åäººä¾†å¹«å…¬ç›Šåœ˜é«”å‹Ÿæ¬¾",
    },
    "answer": "B"
},

{
    "id": 21,
    "audio": ['1-21.mp3'],
    "image": None,
    "question": "é€™ä½å°å§ç‚ºä»€éº¼å¸Œæœ›ç¶²ç«™ä¸è¦å…¬å¸ƒç¥¨é¸çµæœï¼Ÿ ç¾åœ¨è«‹è½å°è©±ã€‚",
    "choices": {
        "A": "æ“”å¿ƒç¶²ç«™ä¾µåææ¬¾",
        "B": "æ“”å¿ƒæ…ˆå–„ææ¬¾åˆ† é…ä¸å‡",
        "C": "ä¸é¡˜ç¶²ç«™è—‰æ­¤æ‰“çŸ¥ååº¦",
        "D": "ä¸é¡˜è®“åˆ¥äººè¦ºå¾—æ²’æœ‰é¢å­",
    },
    "answer": "B"
},

{
    "id": 22,
    "audio": ['1-22-0.mp3', '1-22-1.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "ç¹è¡å¾Œä»£å’Œç‰©ç¨®é€²åŒ–æ˜¯å¦æœ‰é—œ",
        "B": "é€²åŒ–çš„ç›®çš„ æ˜¯å¦å’Œé©æ‡‰ç’°å¢ƒæœ‰é—œ",
        "C": "æ‰€æœ‰ç‰©ç¨® æ˜¯å¦åªæœ‰ä¸€å¥— é€²åŒ–æ©Ÿåˆ¶",
        "D": "ç‰©ç¨®é€²åŒ–æ˜¯å¦è¦è€ƒé‡äººç‚ºçš„æ“ä½œ",
    },
    "answer": "C"
},

{
    "id": 23,
    "audio": ['1-23.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "æ·±ä¿¡ä¸ç–‘",
        "B": "è³ªç–‘å•é›£",
        "C": "å—¤ä¹‹ä»¥é¼»",
        "D": "åŒè²è®šç¾",
    },
    "answer": "B"
},

{
    "id": 24,
    "audio": ['1-24.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å­¸è€…å°ã€Œæ€§æ“‡è«–ã€ çš„åå½ˆæ›´å¤§",
        "B": "æœ‰å­¸è€…ç”¨æ•¸å­¸æ¨¡å‹ å°å‡ºç†è«–çš„ä¸è¶³",
        "C": "å­¸è€…å€‘èªç‚ºè£œè¶³äº†ã€Œæ¼”åŒ–è«–ã€çš„ç¼ºå¤±",
        "D": "æœ‰äº›å­¸è€…èªç‚º é‚„èƒ½è§£é‡‹æ¼”åŒ–çš„ç¤¾æœƒæ€§",
    },
    "answer": "A"
},

{
    "id": 25,
    "audio": ['1-25.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "æ°£æº«é™ä½æœ‰çŸ­æš«é›¨",
        "B": "å—åˆ°é‹’é¢å½±éŸ¿æœƒä¸‹é›¨",
        "C": "æ˜¯é©åˆå‡ºéŠè¸é’çš„å¥½å¤©æ°£",
        "D": "æ—©ä¸Šæœƒä¸‹é›¨ï¼Œä¸‹åˆå‡ºå¤ªé™½",
    },
    "answer": "A"
},

{
    "id": 26,
    "audio": ['2-26-0.mp3', '2-26-1.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å¯„é€é€Ÿåº¦å¿«",
        "B": "å…è²»å¯„é€éƒµä»¶",
        "C": "åªèƒ½å¯„ä¿¡çµ¦è‡ªå·±",
        "D": "å¯„é€æ™‚é–“å¾ˆæœ‰å½ˆæ€§",
    },
    "answer": "D"
},

{
    "id": 27,
    "audio": ['2-27.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "ä¿¡è¢«å¯„ä¸Ÿäº†",
        "B": "ä¿¡æ²’è¾¦æ³•ç«‹åˆ»å¯„åˆ°",
        "C": "å…¬å¸ç”Ÿæ„å¤ªå¥½ï¼Œå½±éŸ¿æ•ˆç‡",
        "D": "åˆ°äº†ç´„å®šçš„æ™‚é–“ï¼Œå»æ²’ äººå¯„ä¿¡",
    },
    "answer": "D"
},

{
    "id": 28,
    "audio": ['2-28-0.mp3', '2-28-1.mp3'],
    "image": None,
    "question": "æœ±ç†¹ä¸€é–‹å§‹è½åˆ°è²·ã€Œæ±è¥¿ã€æ™‚ï¼Œä»–çš„åæ‡‰æ˜¯ä»€éº¼ï¼Ÿ",
    "choices": {
        "A": "ä¸€é ­éœ§æ°´",
        "B": "æ—å¾µåšå¼•",
        "C": "èƒ¸æœ‰æˆç«¹",
        "D": "æ‰‹è¶³ç„¡æª",
    },
    "answer": "A"
},

{
    "id": 29,
    "audio": ['2-29.mp3'],
    "image": None,
    "question": "æœ‹å‹å¾ä»€éº¼è§’åº¦ä¾†å›ç­”æœ±ç†¹çš„å•é¡Œï¼Ÿ",
    "choices": {
        "A": "è²¨å“çš„ç”¢åœ°",
        "B": "æ–¹ä½çš„å±¬æ€§",
        "C": "ç±ƒå­çš„ææ–™",
        "D": "å¸‚å ´çš„ä½ç½®",
    },
    "answer": "B"
},

{
    "id": 30,
    "audio": ['2-30.mp3'],
    "image": None,
    "question": "æœ€å¾Œï¼Œæ ¹æ“šæœ±ç†¹çš„èªªæ³•ï¼Œ ã€Œæ±è¥¿ã€å„ä»£è¡¨ä»€éº¼ï¼Ÿ ç¾åœ¨è«‹è½æ•…äº‹ã€‚",
    "choices": {
        "A": "é‡‘å’Œç«",
        "B": "æœ¨å’Œæ°´",
        "C": "æœ¨å’Œé‡‘",
        "D": "æ°´å’Œç«",
    },
    "answer": "C"
},

{
    "id": 31,
    "audio": ['2-31-0.mp3', '2-31-1.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å› ç‚ºç„¡æ³•æ¶ˆæ»…ç¶²è·¯ç—…æ¯’",
        "B": "å› ç‚ºä¸çŸ¥ä½•æ™‚é¢è‡¨æ­»äº¡",
        "C": "å› ç‚ºä¸äº†è§£ç¶²è·¯æŠ•è³‡çš„é¢¨éšª",
        "D": "å› ç‚ºæƒ³ çŸ¥é“è‡ªå·±çš„å¸³è™Ÿ æ˜¯å¦è¢«ç›œç”¨",
    },
    "answer": "B"
},

{
    "id": 32,
    "audio": ['2-32.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å¹«å®¢æˆ¶åšå¥½é›»è…¦å‚™ä»½",
        "B": "å”åŠ©å®¢æˆ¶æ·˜æ±°å¾ˆå°‘ä½¿ç”¨çš„å¸³è™Ÿ",
        "C": "è®“å®¢æˆ¶éš¨æ™‚èƒ½å’Œå®¶äººåˆ†äº«è³‡æ–™",
        "D": "å¹«å®¢æˆ¶å°‡å¸³è™Ÿè³‡æ–™ç•¶ä½œéºç”¢è™•ç†",
    },
    "answer": "D"
},

{
    "id": 33,
    "audio": ['2-33.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å¯ä»¥å…è²»ä½¿ç”¨",
        "B": "å¯é é˜²é›»è…¦ä¸­æ¯’",
        "C": "å¯†ç¢¼åªèƒ½çµ¦åŒä¸€å€‹äºº",
        "D": "å¯è«‹ç®¡ç†å…¬å¸ä»£ç‚ºé—œé–‰å¸³è™Ÿ",
    },
    "answer": "D"
},

{
    "id": 34,
    "audio": ['2-34-0.mp3', '2-34-1.mp3'],
    "image": None,
    "question": "å¸•æ¢…æ£®æå‡ºä»€éº¼æ–¹æ³•ä¾†æ‹¯æ•‘å‹•æ¤ç‰©ï¼Ÿ",
    "choices": {
        "A": "è¨­ç«‹ä¿è­·å€",
        "B": "æ¸›è¼•æš–åŒ–ç¾è±¡",
        "C": "å¹«å‹•æ¤ç‰©æ¬å®¶",
        "D": "æ”¹å–„ç•¶åœ°çš„ç’°å¢ƒ",
    },
    "answer": "C"
},

{
    "id": 35,
    "audio": ['2-35.mp3'],
    "image": None,
    "question": "å¸•æ¢…æ£®ç‚ºä»€éº¼æƒ³é€éé€™å€‹æ–¹å¼ä¾†æ‹¯æ•‘å‹•æ¤ç‰© ï¼Ÿ",
    "choices": {
        "A": "å› ç‚ºæœ€ æœ‰åŠŸæ•ˆ",
        "B": "å› ç‚ºååˆ† ç¶“æ¿Ÿ",
        "C": "å› ç‚ºèƒ½é¡§åŠå¤šæ•¸ç‰©ç¨®",
        "D": "å› ç‚ºå°ç”Ÿç‰©ç•Œçš„å‚·å®³æœ€å°",
    },
    "answer": "A"
},

{
    "id": 36,
    "audio": ['2-36.mp3'],
    "image": None,
    "question": "ç‚ºä»€éº¼ä¸å°‘ç”Ÿç‰©å­¸å®¶åå°å¸•æ¢…æ£®æå‡ºçš„æ–¹æ³•ï¼Ÿ",
    "choices": {
        "A": "æœƒç ´å£ç”Ÿæ…‹å¹³è¡¡",
        "B": "æœƒå½±éŸ¿æ°£å€™è®ŠåŒ–",
        "C": "äººé¡æœƒå¤§é‡æ•æ®º ç ä¼å‹•æ¤ç‰©",
        "D": "æ‹¯æ•‘é€™äº›å‹•æ¤ç‰© ç„¡æ³•æ”¹å–„ ç’°å¢ƒå•é¡Œ",
    },
    "answer": "A"
},

{
    "id": 37,
    "audio": ['2-37.mp3'],
    "image": None,
    "question": "å­¸è€…å€‘èªç‚ºå¸•æ¢…æ£®çš„æ–¹æ³•æ¯”è¼ƒèƒ½æ‹¯æ•‘å“ªäº›å‹•æ¤ç‰©ï¼Ÿ ç¾åœ¨è«‹è½é€™æ®µè©±ã€‚",
    "choices": {
        "A": "èƒ½è‡ªè¡Œé·å¾™çš„å‹•æ¤ç‰©",
        "B": "ç¶“æ¿Ÿæ•ˆç›Šä½çš„å‹•æ¤ç‰©",
        "C": "æ²’æœ‰çµ•ç¨®å±æ©Ÿçš„å‹•æ¤ç‰©",
        "D": "äººé¡èªç‚ºæœ‰åƒ¹å€¼çš„å‹•æ¤ç‰©",
    },
    "answer": "D"
},

{
    "id": 38,
    "audio": ['2-38-0.mp3', '2-38-1.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "è…¦ç´°èƒçš„å¤§å°å’Œæ™ºå•†é«˜ä½ç„¡é—œ",
        "B": "è…¦ç´°èƒä¸€å‡ºç”Ÿå°±å·²ç¶“ç™¼å±•å®Œå‚™",
        "C": "æ¯”å…¶ä»–ç´°èƒæ›´å¿«é€Ÿ åœ°é€²è¡Œæ±°æ›",
        "D": "å­˜æ´»çš„ æ™‚é–“ä¸å—è»€é«”å­˜æ´»é™åˆ¶",
    },
    "answer": "D"
},

{
    "id": 39,
    "audio": ['2-39.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "è…¦ç¥ç¶“é†«ç™‚",
        "B": "è…¦å¹´é½¡è¨ºæ–·",
        "C": "è…¦ä¸­é¢¨æ²»ç™‚",
        "D": "è…¦åŠŸèƒ½æª¢æ¸¬",
    },
    "answer": "A"
},

{
    "id": 40,
    "audio": ['2-40.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å…ˆåŸ¹è‚²è…¦ç´°èƒï¼Œå†æ¤å…¥ å°å®¶é¼ è…¦ä¸­",
        "B": "å°‡å°å®¶é¼ çš„è…¦ç´°èƒï¼Œæ¤å…¥ å¹´å¹¼å¤§å®¶é¼ ä¸­",
        "C": "å°‡æˆå¹´å¤§å®¶é¼  çš„è…¦ç´°èƒ ï¼Œæ¤å…¥å°å®¶é¼  ä¸­",
        "D": "å°‡è…¦ç´°èƒæ¤å…¥å£½å‘½åª å‰©å…©å¤©çš„å°å®¶é¼  ä¸­",
    },
    "answer": "B"
},

{
    "id": 41,
    "audio": ['2-41.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å¤§å®¶é¼ çš„è…¦ç¥ç¶“é€æ¼¸èç¸®",
        "B": "å°å®¶é¼ çš„ å£½å‘½æ¯”å¤§å®¶é¼  é•·",
        "C": "å¤§å®¶é¼ æ²’æœ‰å¯¦é©— å¾Œçš„å¾Œéºç—‡",
        "D": "å°å®¶é¼ çš„è…¦ç´°èƒ å’Œå¤§å®¶é¼ ä¸€æ¨£ å¤š",
    },
    "answer": "C"
},

{
    "id": 42,
    "audio": ['2-42-0.mp3', '2-42-1.mp3'],
    "image": None,
    "question": "ã€Šå—åŠçƒè·¨åœ‹è¾²ç”¨åœŸåœ°äº¤æ˜“ã€‹å ±å‘Šï¼Œæå‡ºäº†å“ªæ–¹é¢çš„å•é¡Œï¼Ÿ",
    "choices": {
        "A": "è·¨åœ‹è²¿æ˜“ è¡ç”Ÿçš„ç³¾ç´›",
        "B": "è·¨åœ‹è¾²åœ°äº¤æ˜“çš„åˆç†æ€§",
        "C": "æŠ•è³‡è€…è³¼è²·è¾²åœ°çš„æ¬Šåˆ©ä¿éšœ",
        "D": "è¾²åœ°äº¤æ˜“èƒ½å¦æœ‰æ•ˆæé«˜ç³§é£Ÿç”¢é‡",
    },
    "answer": "B"
},

{
    "id": 43,
    "audio": ['2-43.mp3'],
    "image": None,
    "question": "æŠ•è³‡è€…å°æ–¼è·¨åœ‹åœŸåœ°æŠ•è³‡çš„çœ‹æ³•æ˜¯ä»€éº¼ï¼Ÿ",
    "choices": {
        "A": "å®£ç¨±å¯å¢åŠ å…¨çƒç³§é£Ÿç”¢é‡",
        "B": "å¯ä»¥è®“æä¾›è¾²åœ°çš„åœ‹å®¶å…æ–¼é£¢è’",
        "C": "æœ‰åŠ©æ–¼ææ˜‡ ç•¶åœ°å±…æ°‘çš„ç”Ÿæ´» æ°´æº–",
        "D": "èƒ½è§£æ±º åœ°ä¸»åœ‹ç³§é£Ÿç”Ÿç”¢ä¸è¶³å•é¡Œ",
    },
    "answer": "A"
},

{
    "id": 44,
    "audio": ['2-44.mp3'],
    "image": None,
    "question": "èªªè©±è€…å°æ–¼ é€™äº›å•é¡Œ çš„çœ‹æ³•æ˜¯ä»€éº¼ï¼Ÿ",
    "choices": {
        "A": "æ‡‰è©²é–‹æ”¾è²§çª®åœ‹å®¶çš„ åœŸåœ°è²·è³£",
        "B": "è²§çª®åœ‹å®¶æƒ³è„«è²§çš„å¿ƒæ…‹å¯ä»¥ç†è§£",
        "C": "åœŸåœ°äº¤æ˜“å­˜åœ¨å¤ªå¤šå¼·æ¬ºå¼±çš„å•é¡Œ",
        "D": "é–‹å¢¾è’åœ°å°‡å°ç•¶åœ°ç’°å¢ƒé€ æˆå‚·å®³",
    },
    "answer": "C"
},

{
    "id": 45,
    "audio": ['2-45.mp3'],
    "image": None,
    "question": "é€™ç¯‡å ±å°æŒ‡å‡º ï¼Œä¸€æ—¦ç™¼ç”Ÿ äº¤æ˜“ç³¾ç´›ï¼Œ åœ°ä¸»åœ‹èƒ½æ€éº¼åš ï¼Ÿ ç¾åœ¨è«‹è½å ±å°ã€‚",
    "choices": {
        "A": "ä¸»å‹•ä¸­æ–·æŠ•è³‡ è¨ˆç•«",
        "B": "åªèƒ½é¸æ“‡è³ éŒ¢äº†äº‹",
        "C": "å¾—å…ˆè¨´è«¸åœ‹éš›è¼¿è«–",
        "D": "ç„¡æ³•ç‚ºè‡ªå·±çˆ­å–æ¬Šç›Š",
    },
    "answer": "D"
},

{
    "id": 46,
    "audio": ['2-46-0.mp3', '2-46-1.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "å› ç‚ºçŸ®äººæš´èºæ˜“æ€’",
        "B": "å› ç‚ºçŸ®äººå–„æ–¼ å·«è¡“",
        "C": "å› ç‚ºçŸ®äººæ“…é•·æ‰“ä»—",
        "D": "å› ç‚ºçŸ®äººéå¸¸åœ˜çµ",
    },
    "answer": "B"
},

{
    "id": 47,
    "audio": ['2-47.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "æ å¥ªçŸ®äººçš„åœŸåœ°",
        "B": "è¨­è¨ˆé™·é˜±æ®º å®³çŸ®äºº",
        "C": "è®“çŸ®äººçš„å©¦å¥³æ‡·å­•",
        "D": "ä½¿ç”¨å·«è¡“è®“çŸ®äººæ‡¼æ€•",
    },
    "answer": "B"
},

{
    "id": 48,
    "audio": ['2-48.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "ä»¥ç‰™é‚„ç‰™",
        "B": "å¿æ°£åè²",
        "C": "é èµ°ä»–é„‰",
        "D": "æ–å°¾ä¹æ†",
    },
    "answer": "C"
},

{
    "id": 49,
    "audio": ['2-49.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "æ…¶ç¥æˆ°é¬¥çš„å‹åˆ©",
        "B": "ç¥ˆæ±‚ä»‡äººçš„è«’è§£",
        "C": "æ‚¼å¿µæ—è£¡ æ­»å»çš„æˆ°å£«",
        "D": "å°‡æ—ä¸­å©¦å¥³ ç»çµ¦çŸ®äºº",
    },
    "answer": "B"
},

{
    "id": 50,
    "audio": ['2-50.mp3'],
    "image": None,
    "question": "",
    "choices": {
        "A": "æ˜¥è€•ä¹‹å¾Œ",
        "B": "å¤ç¨®ä¹‹å¾Œ",
        "C": "ç§‹æ”¶ä¹‹å¾Œ",
        "D": "å†¬è—ä¹‹å¾Œ",
    },
    "answer": "C"
},
]

# PATHS
BASE_DIR = Path(__file__).parent
AUDIO_DIR = BASE_DIR / "audio3"
IMAGE_DIR = BASE_DIR / "images"

# HELPERS
def normalize_audios(q):
    audios = q.get("audios") or q.get("audio")
    if audios is None:
        raise ValueError(f"Question {q['id']} missing audio")

    if isinstance(audios, str):
        audios = [audios]

    flat = []
    for a in audios:
        if isinstance(a, list):
            flat.extend(a)
        else:
            flat.append(a)

    q["audios"] = flat


def get_audio_duration(audio_files):
    total = 0.0
    for file in audio_files:
        audio = MP3(AUDIO_DIR / file)
        total += audio.info.length
    return int(total) + 1


def play_audio_sequence(audio_files, done_flag):
    for file in audio_files:
        subprocess.call(
            ["afplay", str(AUDIO_DIR / file)],
            stdout=subprocess.DEVNULL,
            stderr=subprocess.DEVNULL
        )
    done_flag.append(True)  # signal audio finished


def live_countdown(duration, done_flag):
    start = time.time()

    while True:
        elapsed = int(time.time() - start)
        remaining = max(duration - elapsed, 0)

        sys.stdout.write(
            f"\r{colored('Answer in', 'yellow')} ({remaining}) "
        )
        sys.stdout.flush()

        if remaining == 0 and done_flag:
            break

        time.sleep(1)

    print()


# NORMALIZE QUESTIONS
score = 0
for q in questions:
    normalize_audios(q)

# EXAM LOOP
for q in questions:
    print(colored(f"\nğŸ§ Listening Question {q['id']}", "cyan"))

    # IMAGE
    if q.get("image"):
        img_path = IMAGE_DIR / q["image"]
        if img_path.exists():
            Image.open(img_path).show()

    # CHECK AUDIO FILES
    for a in q["audios"]:
        if not (AUDIO_DIR / a).exists():
            print(colored(f"âŒ Missing audio: {a}", "red"))
            print(colored("â­ Skipping question.", "yellow"))
            continue

    print(colored("ğŸ”Š Playing audio...", "yellow"))

    # AUDIO THREAD
    audio_done = []
    audio_thread = threading.Thread(
        target=play_audio_sequence,
        args=(q["audios"], audio_done),
        daemon=True
    )
    audio_thread.start()

    # COUNTDOWN (RUNS WITH AUDIO)
    duration = get_audio_duration(q["audios"])
    live_countdown(duration, audio_done)

    # SHOW QUESTION
    print(colored("\n" + q.get("question", ""), "white"))
    for k, v in q["choices"].items():
        print(f"  ({k}) {v}")

    options = "/".join(q["choices"].keys())

    while True:
        user_answer = input(
            colored(f"\nğŸ‘‰ Your answer ({options}): ", "cyan")
        ).strip().upper()

        if user_answer in q["choices"]:
            break

        print(colored(f"âš ï¸ Please enter {options} only.", "yellow"))

    # CHECK ANSWER
    if user_answer == q["answer"]:
        print(colored("âœ… Correct!", "green"))
        score += 1
    else:
        print(colored(f"âŒ Wrong: Correct answer [{q['answer']}]", "red"))

# FINAL SCORE
print(colored(f"\nğŸ¯ Final Score: {score} / {len(questions)}", "magenta"))